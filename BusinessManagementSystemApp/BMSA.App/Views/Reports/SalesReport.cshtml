@model BusinessManagementSystemApp.Core.ViewModels.MilkMamagement.SalesReportViewModel
@{
    ViewBag.Title = "SalesReport";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()

            <div class="panel panel-info">
                <div class="panel-heading with-border">Sales Report</div>
                <div class="panel-body">
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
                        <div class="form-group form-horizontal">
                            <div class="form-group">
                                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                    <label for="Year" class="control-label">Year<span style="color: red">*</span></label>
                                </div>
                                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10" style="width: 60%;">
                                    <select class="form-control" id="Year" name="Year" style="font-size: 16px;">
                                        <option value="">Select</option>
                                        <option value="2022">2022</option>
                                        <option value="2021">2021</option>
                                        <option value="2020">2020</option>
                                        <option value="2019">2019</option>
                                        <option value="2018">2018</option>
                                        <option value="2017">2017</option>
                                    </select>
                                    @Html.ValidationMessageFor(model => model.Year, "", new {@class = "text-danger", @id = "YearVal"})
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                    <label for="Month" class="control-label">Month<span style="color: red">*</span></label>
                                </div>
                                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10" style="width: 60%;">
                                    <select class="form-control" id="Month" name="Month" style="font-size: 16px;">
                                        <option value="">Select</option>
                                        <option value="January">January</option>
                                        <option value="February">February</option>
                                        <option value="March">March</option>
                                        <option value="April">April</option>
                                        <option value="May">May</option>
                                        <option value="June">June</option>
                                        <option value="July">July</option>
                                        <option value="August">August</option>
                                        <option value="September">September</option>
                                        <option value="October">October</option>
                                        <option value="November">November</option>
                                        <option value="December">December</option>
                                    </select>
                                    @Html.ValidationMessageFor(model => model.Month, "", new {@class = "text-danger", @id = "MonthVal"})
                                </div>
                            </div>
                        </div>
                        <div class="form-group form-horizontal">
                            <div class="form-group">
                                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                    <label class="control-label">Delivery Man</label>
                                </div>
                                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10" style="width: 60%;">
                                    @Html.DropDownListFor(c => c.DeliveryManId, null, "", htmlAttributes: new {@class = "form-control show-tick"})
                                </div>
                            </div>
                        </div>
                        <div class="form-group form-horizontal">
                            <div class="form-group">
                                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                                    <label class="control-label">Area</label>
                                </div>
                                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10" style="width: 60%;">
                                    @Html.DropDownListFor(c => c.AreaId, null, "", htmlAttributes: new {@class = "form-control show-tick"})
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>
                            <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10" style="padding-left: 0">
                                <div class="form-group col-lg-3 col-md-3 col-sm-3 col-xs-3" style="padding-left: 4px">
                                    <button type="submit" class="btn btn-primary btn-block" id="btnPreview"><i class="glyphicon glyphicon-eye-open"> PREVIEW</i></button>
                                </div>
                                <div class="form-group col-lg-3 col-md-3 col-sm-3 col-xs-3" style="padding-left: 0">
                                    <a class="btn btn-primary btn-block" id="btnClear"> <i class="glyphicon glyphicon-refresh"> CLEAR</i> </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
@section ViewSpecificJavascript
{
    <script type="text/javascript">
        $(document).ready(function() {
            $("#DeliveryManId").select2();
            $("#AreaId").select2();
            $.get("/api/DeliveryMen",
                function(data) {
                    var $el = $("#DeliveryManId");
                    $el.empty(); // remove old options
                    $el.append($("<option></option>")
                        .attr("value", '').text(''));
                    $.each(data,
                        function(value, key) {
                            $el.append($('<option>',
                                {
                                    value: key.id,
                                    text: key.name
                                }));
                        });
                });

            $.get("/api/Areas",
                function(data) {
                    var $el = $("#AreaId");
                    $el.empty(); // remove old options
                    $el.append($("<option></option>")
                        .attr("value", '').text(''));
                    $.each(data,
                        function(value, key) {
                            $el.append($('<option>',
                                {
                                    value: key.id,
                                    text: key.name
                                }));
                        });
                });
        });
        //$(document.body).on("click", "#btnPreview", function () {
        //    var year = $("#Year").val();
        //    var month = $("#Month").val();
        //    var deliveryManId = $("#DeliveryManId").val();
        //    var areaId = $("#AreaId").val();

        //    if (year.length===0 || month.length===0) {
        //        toastr.warning("Please Select Month & Year", "!!Warning");
        //        return;
        //    }
        //    $.ajax({
        //        url: "/api/Reports/SalesReportByDeliveryMenWise",
        //        method: "GET",
        //        data: { month: month, year: year, deliveryManId: deliveryManId, areaId: areaId},
        //        success: function () {
        //            toastr.success("Delete Success");
        //        },
        //        error: function (request, status, error) {
        //            var response = jQuery.parseJSON(request.responseText);
        //            toastr.error(response.message, "Error");
        //        }
        //    });
        //});
        
    </script>
}
